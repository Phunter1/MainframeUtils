	TITLE 'TESTPSW - TEST LPSW AND SVC, PCK, AND EXT INTERRUPTS'
*********
*
*  PGM-ID.  TESTPSW.ALC
*  AUTHOR.  DON HIGGINS
*  DATE.    04/26/87
*  REMARKS.
*
*     THIS PROGRAM TESTS PC/370 RELEASE 2 PSW SUPPORT:
*
*     1.  LOAD CLOCK.MOD WHICH USES TRANSPARENT SVC HANDLER AND AN
*         EXTERNAL INTERRUPT HANDLER TO DISPLAY TIME OF DAY IN UPPER
*         LEFT CORNER OF SCREEN.  EXTERNAL INTERRUPT OCCURS EVERY
*         256 INSTRUCTIONS.
*
*
*
*********
TESTPSW  CSECT
	LR    R12,R15
	USING TESTPSW,R12
	LA    R2,=C'TESTPSW STARTED$'
	SVC   WTO
	L     R15,=V(DTIME)
	BALR  R14,R15
	LA    R1,=C'CLOCK.MOD'
	SVC   LOAD
	LTR   R15,R15
	BNZ   ERR
	LR    R15,R0
	BALR  R14,R15 START UP CLOCK PROBLEM STATE MODE
	LA    R3,50
LOOP     EQU   *
	LA    R2,=C'CLOCK RUNNING NOW$'
	SVC   WTO
	LA    R4,500
	BCT   R4,*
	BCT   R3,LOOP
	LA    R2,=C'TESTPSW ENDED$'
	SVC   WTO
	SVC   EXIT
ERR      EQU   *
	SVC   TRACE
	DC    C'BUG'
	SVC   EXIT
	LTORG
EXIT     EQU   0
TRACE    EQU   9
LOAD     EQU   25
WTO      EQU   209
R0       EQU   0
R1       EQU   1
R2       EQU   2
R3       EQU   3
R4       EQU   4
R12      EQU   12
R14      EQU   14
R15      EQU   15
	END
